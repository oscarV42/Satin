(this.webpackJsonpsatin=this.webpackJsonpsatin||[]).push([[0],{114:function(e,t,s){},123:function(e,t,s){},124:function(e,t,s){},126:function(e,t,s){},144:function(e,t,s){},145:function(e,t,s){},146:function(e,t,s){},147:function(e,t,s){},148:function(e,t,s){},149:function(e,t,s){},150:function(e,t,s){},151:function(e,t,s){},152:function(e,t,s){},153:function(e,t,s){},154:function(e,t,s){},155:function(e,t,s){},160:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),c=s(94),r=s.n(c),i=s(21),o=(s(114),s(179)),l=s(180),j=s(181),d=s(182),u=s(43),b=s(6),m=s(44),O=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"FOLLOW":return Object(i.a)(Object(i.a)({},e),{},{user:Object(i.a)(Object(i.a)({},e.user),{},{followings:[].concat(Object(m.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(i.a)(Object(i.a)({},e),{},{user:Object(i.a)(Object(i.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},p=s(0),h={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},x=Object(n.createContext)(h),f=function(e){var t=e.children,s=Object(n.useReducer)(O,h),a=Object(b.a)(s,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){localStorage.setItem("user",JSON.stringify(c.user))}),[c.user]),Object(p.jsx)(x.Provider,{value:{user:c.user,isFetching:c.isFetching,error:c.error,dispatch:r},children:t})};function v(){var e=Object(n.useContext)(x).user,t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER;return Object(p.jsxs)("div",{className:"topbarContainer",children:[Object(p.jsx)("div",{className:"topbarLeft",children:Object(p.jsx)(u.b,{to:"/",style:{textDecoration:"none"},children:Object(p.jsx)("span",{className:"logo",children:"Lamasocial"})})}),Object(p.jsx)("div",{className:"topbarCenter",children:Object(p.jsxs)("div",{className:"searchbar",children:[Object(p.jsx)(o.a,{className:"searchIcon"}),Object(p.jsx)("input",{placeholder:"Search for friend, post or video",className:"searchInput"})]})}),Object(p.jsxs)("div",{className:"topbarRight",children:[Object(p.jsxs)("div",{className:"topbarLinks",children:[Object(p.jsx)("span",{className:"topbarLink",children:"Homepage"}),Object(p.jsx)("span",{className:"topbarLink",children:"Timeline"})]}),Object(p.jsxs)("div",{className:"topbarIcons",children:[Object(p.jsxs)("div",{className:"topbarIconItem",children:[Object(p.jsx)(l.a,{}),Object(p.jsx)("span",{className:"topbarIconBadge",children:"1"})]}),Object(p.jsxs)("div",{className:"topbarIconItem",children:[Object(p.jsx)(j.a,{}),Object(p.jsx)("span",{className:"topbarIconBadge",children:"2"})]}),Object(p.jsxs)("div",{className:"topbarIconItem",children:[Object(p.jsx)(d.a,{}),Object(p.jsx)("span",{className:"topbarIconBadge",children:"1"})]})]}),Object(p.jsx)(u.b,{to:"/profile/".concat(e.username),children:Object(p.jsx)("img",{src:e.profilePicture?t+e.profilePicture:t+"person/noAvatar.png",alt:"",className:"topbarImg"})})]})]})}s(123);var g=s(183),N=s(184),I=s(185),_=s(186),S=s(187),T=s(188),C=s(189),E=s(190),P=[{id:1,profilePicture:"person/1.jpeg",username:"Safak Kocaoglu"},{id:2,profilePicture:"person/2.jpeg",username:"Janell Shrum"},{id:3,profilePicture:"person/3.jpeg",username:"Alex Durden"},{id:4,profilePicture:"person/4.jpeg",username:"Dora Hawks"},{id:5,profilePicture:"person/5.jpeg",username:"Thomas Holden"},{id:6,profilePicture:"person/6.jpeg",username:"Shirley Beauchamp"},{id:7,profilePicture:"person/7.jpeg",username:"Travis Bennett"},{id:8,profilePicture:"person/8.jpeg",username:"Kristen Thomas"},{id:9,profilePicture:"person/9.jpeg",username:"Gary Duty"},{id:10,profilePicture:"person/10.jpeg",username:"Safak Kocaoglu"}];s(124);function w(e){var t=e.user,s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER;return Object(p.jsxs)("li",{className:"sidebarFriend",children:[Object(p.jsx)("img",{className:"sidebarFriendImg",src:s+t.profilePicture,alt:""}),Object(p.jsx)("span",{className:"sidebarFriendName",children:t.username})]})}function L(){return Object(p.jsx)("div",{className:"sidebar",children:Object(p.jsxs)("div",{className:"sidebarWrapper",children:[Object(p.jsxs)("ul",{className:"sidebarList",children:[Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(g.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Feed"})]}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(j.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Chats"})]}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(N.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Videos"})]}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(I.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Groups"})]}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(_.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Bookmarks"})]}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(S.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Questions"})]}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(T.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Jobs"})]}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(C.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Events"})]}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(E.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Courses"})]})]}),Object(p.jsx)("button",{className:"sidebarButton",children:"Show More"}),Object(p.jsx)("hr",{className:"sidebarHr"}),Object(p.jsx)("ul",{className:"sidebarFriendList",children:P.map((function(e){return Object(p.jsx)(w,{user:e},e.id)}))})]})})}var k=s(5),R=s.n(k),D=s(10),y=(s(126),s(191)),A=s(8),F=s.n(A),B=s(74);function U(e){var t=e.post,s=Object(n.useState)(t.likes.length),a=Object(b.a)(s,2),c=a[0],r=a[1],i=Object(n.useState)(!1),o=Object(b.a)(i,2),l=o[0],j=o[1],d=Object(n.useState)({}),m=Object(b.a)(d,2),O=m[0],h=m[1],f=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER,v=Object(n.useContext)(x).user;Object(n.useEffect)((function(){j(t.likes.includes(v._id))}),[v._id,t.likes]),Object(n.useEffect)((function(){var e=function(){var e=Object(D.a)(R.a.mark((function e(){var s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("/users?userId=".concat(t.userId));case 2:s=e.sent,h(s.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.userId]);var g=function(){try{F.a.put("/posts/"+t._id+"/like",{userId:v._id})}catch(e){}r(l?c-1:c+1),j(!l)};return Object(p.jsx)("div",{className:"post",children:Object(p.jsxs)("div",{className:"postWrapper",children:[Object(p.jsxs)("div",{className:"postTop",children:[Object(p.jsxs)("div",{className:"postTopLeft",children:[Object(p.jsx)(u.b,{to:"/profile/".concat(O.username),children:Object(p.jsx)("img",{className:"postProfileImg",src:O.profilePicture?f+O.profilePicture:f+"person/noAvatar.png",alt:""})}),Object(p.jsx)("span",{className:"postUsername",children:O.username}),Object(p.jsx)("span",{className:"postDate",children:Object(B.a)(t.createdAt)})]}),Object(p.jsx)("div",{className:"postTopRight",children:Object(p.jsx)(y.a,{})})]}),Object(p.jsxs)("div",{className:"postCenter",children:[Object(p.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),Object(p.jsx)("img",{className:"postImg",src:f+t.img,alt:""})]}),Object(p.jsxs)("div",{className:"postBottom",children:[Object(p.jsxs)("div",{className:"postBottomLeft",children:[Object(p.jsx)("img",{className:"likeIcon",src:"".concat(f,"like.png"),onClick:g,alt:""}),Object(p.jsx)("img",{className:"likeIcon",src:"".concat(f,"heart.png"),onClick:g,alt:""}),Object(p.jsxs)("span",{className:"postLikeCounter",children:[c," people like it"]})]}),Object(p.jsx)("div",{className:"postBottomRight",children:Object(p.jsxs)("span",{className:"postCommentText",children:[t.comment," comments"]})})]})]})})}s(144);var W=s(192),$=s(193),H=s(194),K=s(195),V=s(196);function M(){var e=Object(n.useContext)(x).user,t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER,s=Object(n.useRef)(),a=Object(n.useState)(null),c=Object(b.a)(a,2),r=c[0],i=c[1],o=function(){var t=Object(D.a)(R.a.mark((function t(n){var a,c,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a={userId:e._id,desc:s.current.value},!r){t.next=16;break}return c=new FormData,i=Date.now()+r.name,c.append("name",i),c.append("file",r),a.img=i,console.log(a),t.prev=9,t.next=12,F.a.post("/upload",c);case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(9);case 16:return t.prev=16,t.next=19,F.a.post("/posts",a);case 19:window.location.reload(),t.next=24;break;case 22:t.prev=22,t.t1=t.catch(16);case 24:case"end":return t.stop()}}),t,null,[[9,14],[16,22]])})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"share",children:Object(p.jsxs)("div",{className:"shareWrapper",children:[Object(p.jsxs)("div",{className:"shareTop",children:[Object(p.jsx)("img",{className:"shareProfileImg",src:e.profilePicture?t+e.profilePicture:t+"person/noAvatar.png",alt:""}),Object(p.jsx)("input",{placeholder:"What's in your mind "+e.username+"?",className:"shareInput",ref:s})]}),Object(p.jsx)("hr",{className:"shareHr"}),r&&Object(p.jsxs)("div",{className:"shareImgContainer",children:[Object(p.jsx)("img",{className:"shareImg",src:URL.createObjectURL(r),alt:""}),Object(p.jsx)(W.a,{className:"shareCancelImg",onClick:function(){return i(null)}})]}),Object(p.jsxs)("form",{className:"shareBottom",onSubmit:o,children:[Object(p.jsxs)("div",{className:"shareOptions",children:[Object(p.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(p.jsx)($.a,{htmlColor:"tomato",className:"shareIcon"}),Object(p.jsx)("span",{className:"shareOptionText",children:"Photo or Video"}),Object(p.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return i(e.target.files[0])}})]}),Object(p.jsxs)("div",{className:"shareOption",children:[Object(p.jsx)(H.a,{htmlColor:"blue",className:"shareIcon"}),Object(p.jsx)("span",{className:"shareOptionText",children:"Tag"})]}),Object(p.jsxs)("div",{className:"shareOption",children:[Object(p.jsx)(K.a,{htmlColor:"green",className:"shareIcon"}),Object(p.jsx)("span",{className:"shareOptionText",children:"Location"})]}),Object(p.jsxs)("div",{className:"shareOption",children:[Object(p.jsx)(V.a,{htmlColor:"goldenrod",className:"shareIcon"}),Object(p.jsx)("span",{className:"shareOptionText",children:"Feelings"})]})]}),Object(p.jsx)("button",{className:"shareButton",type:"submit",children:"Share"})]})]})})}s(145);function G(e){var t=e.username,s=Object(n.useState)([]),a=Object(b.a)(s,2),c=a[0],r=a[1],i=Object(n.useContext)(x).user;return Object(n.useEffect)((function(){var e=function(){var e=Object(D.a)(R.a.mark((function e(){var s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,F.a.get("/posts/profile/"+t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,F.a.get("posts/timeline/"+i._id);case 8:e.t0=e.sent;case 9:s=e.t0,r(s.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t,i._id]),Object(p.jsx)("div",{className:"feed",children:Object(p.jsxs)("div",{className:"feedWrapper",children:[(!t||t===i.username)&&Object(p.jsx)(M,{}),c.map((function(e){return Object(p.jsx)(U,{post:e},e._id)}))]})})}s(146),s(147);function q(e){var t=e.user,s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER;return Object(p.jsxs)("li",{className:"rightbarFriend",children:[Object(p.jsxs)("div",{className:"rightbarProfileImgContainer",children:[Object(p.jsx)("img",{className:"rightbarProfileImg",src:s+t.profilePicture,alt:""}),Object(p.jsx)("span",{className:"rightbarOnline"})]}),Object(p.jsx)("span",{className:"rightbarUsername",children:t.username})]})}var J=s(197),z=s(198);function Q(e){var t=e.user,s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER,a=Object(n.useState)([]),c=Object(b.a)(a,2),r=c[0],i=c[1],o=Object(n.useContext)(x),l=o.user,j=o.dispatch,d=Object(n.useState)(l.followings.includes(null===t||void 0===t?void 0:t.id)),m=Object(b.a)(d,2),O=m[0],h=m[1];Object(n.useEffect)((function(){var e=function(){var e=Object(D.a)(R.a.mark((function e(){var s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/users/friends/"+t._id);case 3:s=e.sent,i(s.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var f=function(){var e=Object(D.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!O){e.next=7;break}return e.next=4,F.a.put("/users/".concat(t._id,"/unfollow"),{userId:l._id});case 4:j({type:"UNFOLLOW",payload:t._id}),e.next=10;break;case 7:return e.next=9,F.a.put("/users/".concat(t._id,"/follow"),{userId:l._id});case 9:j({type:"FOLLOW",payload:t._id});case 10:h(!O),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),v=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"birthdayContainer",children:[Object(p.jsx)("img",{className:"birthdayImg",src:"assets/gift.png",alt:""}),Object(p.jsxs)("span",{className:"birthdayText",children:[Object(p.jsx)("b",{children:"Pola Foster"})," and ",Object(p.jsx)("b",{children:"3 other friends"})," have a birhday today."]})]}),Object(p.jsx)("img",{className:"rightbarAd",src:"assets/ad.png",alt:""}),Object(p.jsx)("h4",{className:"rightbarTitle",children:"Online Friends"}),Object(p.jsx)("ul",{className:"rightbarFriendList",children:P.map((function(e){return Object(p.jsx)(q,{user:e},e.id)}))})]})},g=function(){return Object(p.jsxs)(p.Fragment,{children:[t.username!==l.username&&Object(p.jsxs)("button",{className:"rightbarFollowButton",onClick:f,children:[O?"Unfollow":"Follow",O?Object(p.jsx)(J.a,{}):Object(p.jsx)(z.a,{})]}),Object(p.jsx)("h4",{className:"rightbarTitle",children:"User information"}),Object(p.jsxs)("div",{className:"rightbarInfo",children:[Object(p.jsxs)("div",{className:"rightbarInfoItem",children:[Object(p.jsx)("span",{className:"rightbarInfoKey",children:"City:"}),Object(p.jsx)("span",{className:"rightbarInfoValue",children:t.city})]}),Object(p.jsxs)("div",{className:"rightbarInfoItem",children:[Object(p.jsx)("span",{className:"rightbarInfoKey",children:"From:"}),Object(p.jsx)("span",{className:"rightbarInfoValue",children:t.from})]}),Object(p.jsxs)("div",{className:"rightbarInfoItem",children:[Object(p.jsx)("span",{className:"rightbarInfoKey",children:"Relationship:"}),Object(p.jsx)("span",{className:"rightbarInfoValue",children:1===t.relationship?"Single":1===t.relationship?"Married":"-"})]})]}),Object(p.jsx)("h4",{className:"rightbarTitle",children:"User friends"}),Object(p.jsx)("div",{className:"rightbarFollowings",children:r.map((function(e){return Object(p.jsx)(u.b,{to:"/profile/"+e.username,style:{textDecoration:"none"},children:Object(p.jsxs)("div",{className:"rightbarFollowing",children:[Object(p.jsx)("img",{src:e.profilePicture?s+e.profilePicture:s+"person/noAvatar.png",alt:"",className:"rightbarFollowingImg"}),Object(p.jsx)("span",{className:"rightbarFollowingName",children:e.username})]})})}))})]})};return Object(p.jsx)("div",{className:"rightbar",children:Object(p.jsx)("div",{className:"rightbarWrapper",children:t?Object(p.jsx)(g,{}):Object(p.jsx)(v,{})})})}s(148);function X(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v,{}),Object(p.jsxs)("div",{className:"homeContainer",children:[Object(p.jsx)(L,{}),Object(p.jsx)(G,{}),Object(p.jsx)(Q,{})]})]})}s(149);var Y=function(){var e=Object(D.a)(R.a.mark((function e(t,s){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"LOGIN_START"}),e.prev=1,e.next=4,F.a.post("/auth/login",t);case 4:n=e.sent,s({type:"LOGIN_SUCCESS",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"LOGIN_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,s){return e.apply(this,arguments)}}(),Z=s(199);function ee(){var e=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useContext)(x),a=s.isFetching,c=s.dispatch;return Object(p.jsx)("div",{className:"login",children:Object(p.jsxs)("div",{className:"loginWrapper",children:[Object(p.jsxs)("div",{className:"loginLeft",children:[Object(p.jsx)("h3",{className:"loginLogo",children:"Lamasocial"}),Object(p.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on Lamasocial."})]}),Object(p.jsx)("div",{className:"loginRight",children:Object(p.jsxs)("form",{className:"loginBox",onSubmit:function(s){s.preventDefault(),Y({email:e.current.value,password:t.current.value},c)},children:[Object(p.jsx)("input",{placeholder:"Email",type:"email",required:!0,className:"loginInput",ref:e}),Object(p.jsx)("input",{placeholder:"Password",type:"password",required:!0,minLength:"6",className:"loginInput",ref:t}),Object(p.jsx)("button",{className:"loginButton",type:"submit",disabled:a,children:a?Object(p.jsx)(Z.a,{color:"white",size:"20px"}):"Log In"}),Object(p.jsx)("span",{className:"loginForgot",children:"Forgot Password?"}),Object(p.jsx)("button",{className:"loginRegisterButton",children:a?Object(p.jsx)(Z.a,{color:"white",size:"20px"}):"Create a New Account"})]})})]})})}s(150);var te=s(11);function se(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER,t=Object(n.useState)({}),s=Object(b.a)(t,2),a=s[0],c=s[1],r=Object(te.g)().username;return Object(n.useEffect)((function(){var e=function(){var e=Object(D.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("/users?username=".concat(r));case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[r]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v,{}),Object(p.jsxs)("div",{className:"profile",children:[Object(p.jsx)(L,{}),Object(p.jsxs)("div",{className:"profileRight",children:[Object(p.jsxs)("div",{className:"profileRightTop",children:[Object(p.jsxs)("div",{className:"profileCover",children:[Object(p.jsx)("img",{className:"profileCoverImg",src:a.coverPicture?e+a.coverPicture:e+"person/noCover.png",alt:""}),Object(p.jsx)("img",{className:"profileUserImg",src:a.profilePicture?e+a.profilePicture:e+"person/noAvatar.png",alt:""})]}),Object(p.jsxs)("div",{className:"profileInfo",children:[Object(p.jsx)("h4",{className:"profileInfoName",children:a.username}),Object(p.jsx)("span",{className:"profileInfoDesc",children:a.desc})]})]}),Object(p.jsxs)("div",{className:"profileRightBottom",children:[Object(p.jsx)(G,{username:r}),Object(p.jsx)(Q,{user:a})]})]})]})]})}var ne,ae,ce,re,ie,oe,le,je,de,ue=s(42),be=(s(151),s(208)),me=s(39),Oe=s(206),pe=(Object(Oe.a)(ne||(ne=Object(me.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),Object(Oe.a)(ae||(ae=Object(me.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"])))),he=(Object(Oe.a)(ce||(ce=Object(me.a)(["\n  mutation addPost($img: String, $postBody: String!, $postAuthor: String!) {\n    addPost(img: $img, postBody: $postBody, postAuthor: $postAuthor) {\n      _id\n      postBody\n      postAuthor\n      postDate\n      comments {\n        _id\n        commentText\n      }\n      likes\n      img\n    }\n  }\n"]))),Object(Oe.a)(re||(re=Object(me.a)(["\n  mutation removePost($postId: ID!) {\n    removePost(postId: $postId) {\n      _id\n      postBody\n      postAuthor\n      postDate\n      comments {\n        _id\n        commentText\n      }\n      likes\n      img\n    }\n  }\n"]))),Object(Oe.a)(ie||(ie=Object(me.a)(["\n  mutation addComment(\n    $postId: ID!\n    $commentText: String!\n    $commentAuthor: String!\n  ) {\n    addComment(\n      postId: $postId\n      commentText: $commentText\n      commentAuthor: $commentAuthor\n    ) {\n      _id\n      postBody\n      postAuthor\n      postDate\n      comments {\n        _id\n        commentText\n        createdAt\n      }\n      likes\n      img\n    }\n  }\n"]))),Object(Oe.a)(oe||(oe=Object(me.a)(["\n  mutation removePost(\n    $postId: ID!\n    $commentId: ID!\n  ) {\n    removePost(\n      postId: $postId\n      commentId: $commentId\n    ) {\n      _id\n      postBody\n      postAuthor\n      postDate\n      comments {\n        _id\n        commentText\n        createdAt\n      }\n      likes\n      img\n    }\n  }\n"]))),Object(Oe.a)(le||(le=Object(me.a)(["\n  mutation addConvo($members: Array!) {\n    addConvo(members: $members) {\n      _id\n      members\n      messages {\n        sender\n        text\n        createdAt\n      }\n    }\n  }\n"]))),Object(Oe.a)(je||(je=Object(me.a)(["\n  mutation addMessage($convoId: ID!, $sender: String!, $text: String!) {\n    addMessage(convoId: $convoId, sender: $sender, text: $text) {\n      _id\n      members\n      messages {\n        sender\n        text\n        createdAt\n      }\n    }\n  }\n"]))),Object(Oe.a)(de||(de=Object(me.a)(["\n  mutation removeMessage($convoId: ID!, $messageId: ID!) {\n    removeMessage(convoId: $convoId, messageId: $messageId) {\n      _id\n      members\n      messages {\n        sender\n        text\n        createdAt\n      }\n    }\n  }\n"]))),s(14)),xe=s(9),fe=s(77),ve=new(function(){function e(){Object(he.a)(this,e)}return Object(xe.a)(e,[{key:"getProfile",value:function(){return Object(fe.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(fe.a)(e).exp<Date.now()/1e3&&localStorage.removeItem("id_token"),!1}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}());function ge(){var e=Object(n.useState)({username:"",email:"",password:""}),t=Object(b.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)(!1),r=Object(b.a)(c,2),o=(r[0],r[1]),l=Object(be.a)(pe),j=Object(b.a)(l,2),d=j[0],u=(j[1].error,function(e){var t=e.target,n=t.name,c=t.value;a(Object(i.a)(Object(i.a)({},s),{},Object(ue.a)({},n,c)))}),m=function(){var e=Object(D.a)(R.a.mark((function e(t){var n,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d({variables:{username:s.username,email:s.email,password:s.password}});case 4:n=e.sent,c=n.data,ve.login(c.addUser.token),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),o(!0);case 13:console.log(s),a({username:"",email:"",password:""});case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"login",children:Object(p.jsxs)("div",{className:"loginWrapper",children:[Object(p.jsxs)("div",{className:"loginLeft",children:[Object(p.jsx)("h3",{className:"loginLogo",children:"Satin"}),Object(p.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you."})]}),Object(p.jsx)("div",{className:"loginRight",children:Object(p.jsxs)("form",{className:"loginBox",onSubmit:m,children:[Object(p.jsx)("input",{placeholder:"Username",required:!0,name:"username",value:s.username,onChange:u,className:"loginInput"}),Object(p.jsx)("input",{placeholder:"Email",required:!0,name:"email",value:s.email,onChange:u,className:"loginInput",type:"email"}),Object(p.jsx)("input",{placeholder:"Password",required:!0,name:"password",value:s.password,onChange:u,className:"loginInput",type:"password",minLength:"6"}),Object(p.jsx)("button",{className:"loginButton",type:"submit",children:"Sign Up"}),Object(p.jsx)("button",{className:"loginRegisterButton",children:"Log into Account"})]})})]})})}s(152),s(153);function Ne(e){var t=e.conversation,s=e.currentUser,a=Object(n.useState)(null),c=Object(b.a)(a,2),r=c[0],i=c[1],o=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER;return Object(n.useEffect)((function(){var e=t.members.find((function(e){return e!==s._id})),n=function(){var t=Object(D.a)(R.a.mark((function t(){var s;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F()("/users?userId="+e);case 3:s=t.sent,i(s.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();n()}),[s,t]),Object(p.jsxs)("div",{className:"conversation",children:[Object(p.jsx)("img",{className:"conversationImg",src:(null===r||void 0===r?void 0:r.profilePicture)?o+r.profilePicture:o+"person/noAvatar.png",alt:""}),Object(p.jsx)("span",{className:"conversationName",children:null===r||void 0===r?void 0:r.username})]})}s(154);function Ie(e){var t=e.message,s=e.own;return Object(p.jsxs)("div",{className:s?"message own":"message",children:[Object(p.jsxs)("div",{className:"messageTop",children:[Object(p.jsx)("img",{className:"messageImg",src:"https://images.pexels.com/photos/3686769/pexels-photo-3686769.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",alt:""}),Object(p.jsx)("p",{className:"messageText",children:t.text})]}),Object(p.jsx)("div",{className:"messageBottom",children:Object(B.a)(t.createdAt)})]})}s(155);function _e(e){var t=e.onlineUsers,s=e.currentId,a=e.setCurrentChat,c=Object(n.useState)([]),r=Object(b.a)(c,2),i=r[0],o=r[1],l=Object(n.useState)([]),j=Object(b.a)(l,2),d=j[0],u=j[1],m=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER;Object(n.useEffect)((function(){var e=function(){var e=Object(D.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("/users/friends/"+s);case 2:t=e.sent,o(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[s]),Object(n.useEffect)((function(){u(i.filter((function(e){return t.includes(e._id)})))}),[i,t]);var O=function(){var e=Object(D.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/conversations/find/".concat(s,"/").concat(t._id));case 3:n=e.sent,a(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"chatOnline",children:d.map((function(e){return Object(p.jsxs)("div",{className:"chatOnlineFriend",onClick:function(){return O(e)},children:[Object(p.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(p.jsx)("img",{className:"chatOnlineImg",src:(null===e||void 0===e?void 0:e.profilePicture)?m+e.profilePicture:m+"person/noAvatar.png",alt:""}),Object(p.jsx)("div",{className:"chatOnlineBadge"})]}),Object(p.jsx)("span",{className:"chatOnlineName",children:null===e||void 0===e?void 0:e.username})]})}))})}var Se=s(105);function Te(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)(null),r=Object(b.a)(c,2),i=r[0],o=r[1],l=Object(n.useState)([]),j=Object(b.a)(l,2),d=j[0],u=j[1],O=Object(n.useState)(""),h=Object(b.a)(O,2),f=h[0],g=h[1],N=Object(n.useState)(null),I=Object(b.a)(N,2),_=I[0],S=I[1],T=Object(n.useState)([]),C=Object(b.a)(T,2),E=C[0],P=C[1],w=Object(n.useRef)(),L=Object(n.useContext)(x).user,k=Object(n.useRef)();Object(n.useEffect)((function(){w.current=Object(Se.a)("ws://localhost:8900"),w.current.on("getMessage",(function(e){S({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(n.useEffect)((function(){_&&(null===i||void 0===i?void 0:i.members.includes(_.sender))&&u((function(e){return[].concat(Object(m.a)(e),[_])}))}),[_,i]),Object(n.useEffect)((function(){w.current.emit("addUser",L._id),w.current.on("getUsers",(function(e){P(L.followings.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[L]),Object(n.useEffect)((function(){var e=function(){var e=Object(D.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/conversations/"+L._id);case 3:t=e.sent,a(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[L._id]),Object(n.useEffect)((function(){var e=function(){var e=Object(D.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/messages/"+(null===i||void 0===i?void 0:i._id));case 3:t=e.sent,u(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[i]);var y=function(){var e=Object(D.a)(R.a.mark((function e(t){var s,n,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={sender:L._id,text:f,conversationId:i._id},n=i.members.find((function(e){return e!==L._id})),w.current.emit("sendMessage",{senderId:L._id,receiverId:n,text:f}),e.prev=4,e.next=7,F.a.post("/messages",s);case 7:a=e.sent,u([].concat(Object(m.a)(d),[a.data])),g(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e;null===(e=k.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[d]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v,{}),Object(p.jsxs)("div",{className:"messenger",children:[Object(p.jsx)("div",{className:"chatMenu",children:Object(p.jsxs)("div",{className:"chatMenuWrapper",children:[Object(p.jsx)("input",{placeholder:"Search for friends",className:"chatMenuInput"}),s.map((function(e){return Object(p.jsx)("div",{onClick:function(){return o(e)},children:Object(p.jsx)(Ne,{conversation:e,currentUser:L})})}))]})}),Object(p.jsx)("div",{className:"chatBox",children:Object(p.jsx)("div",{className:"chatBoxWrapper",children:i?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"chatBoxTop",children:d.map((function(e){return Object(p.jsx)("div",{ref:k,children:Object(p.jsx)(Ie,{message:e,own:e.sender===L._id})})}))}),Object(p.jsxs)("div",{className:"chatBoxBottom",children:[Object(p.jsx)("textarea",{className:"chatMessageInput",placeholder:"write something...",onChange:function(e){return g(e.target.value)},value:f}),Object(p.jsx)("button",{className:"chatSubmitButton",onClick:y,children:"Send"})]})]}):Object(p.jsx)("span",{className:"noConversationText",children:"Open a conversation to start a chat."})})}),Object(p.jsx)("div",{className:"chatOnline",children:Object(p.jsx)("div",{className:"chatOnlineWrapper",children:Object(p.jsx)(_e,{onlineUsers:E,currentId:L._id,setCurrentChat:o})})})]})]})}var Ce=s(106),Ee=s(205),Pe=s(207),we=s(204),Le=s(104),ke=Object(Ce.a)({uri:"/graphql"}),Re=Object(Le.a)((function(e,t){var s=t.headers,n=localStorage.getItem("id_token");return{headers:Object(i.a)(Object(i.a)({},s),{},{authorization:n?"Holder ".concat(n):""})}})),De=new Ee.a({link:Re.concat(ke),cache:new Pe.a});var ye=function(){var e=Object(n.useContext)(x).user;return Object(p.jsx)(we.a,{client:De,children:Object(p.jsx)(u.a,{children:Object(p.jsxs)(te.d,{children:[Object(p.jsx)(te.b,{exact:!0,path:"/",children:e?Object(p.jsx)(X,{}):Object(p.jsx)(ge,{})}),Object(p.jsx)(te.b,{path:"/login",children:e?Object(p.jsx)(te.a,{to:"/"}):Object(p.jsx)(ee,{})}),Object(p.jsx)(te.b,{path:"/register",children:e?Object(p.jsx)(te.a,{to:"/"}):Object(p.jsx)(ge,{})}),Object(p.jsx)(te.b,{path:"/messenger",children:e?Object(p.jsx)(Te,{}):Object(p.jsx)(te.a,{to:"/"})}),Object(p.jsx)(te.b,{path:"/profile/:username",children:Object(p.jsx)(se,{})})]})})})};r.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(f,{children:Object(p.jsx)(ye,{})})}),document.getElementById("root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.2bc027c1.chunk.js.map